<!-- Language Switcher -->
<div class="language-switcher"
  style="position: fixed; top: 10px; right: 10px; z-index: 1000; background: white; padding: 10px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
  <label for="language-select">üåê </label>
  <select id="language-select" onchange="switchLanguage(this.value)" style="padding: 5px; border-radius: 3px;">
    <option value="en" {% if page.lang=='en' %}selected{% endif %}>English</option>
    <option value="zh" {% if page.lang=='zh' %}selected{% endif %}>‰∏≠Êñá</option>
  </select>
</div>

<script>
  function switchLanguage(lang) {
    var currentPath = window.location.pathname;
    var baseUrl = '/Finnish-Notes';
    
    // Remove base URL to get clean path
    var pathWithoutBase = currentPath.replace(baseUrl, '');
    
    // Remove current language prefix
    var cleanPath = pathWithoutBase.replace(/^\/(en|zh)(\/|$)/, '/');
    
    // Build new path
    var newPath = baseUrl + '/' + lang + cleanPath;
    
    // Clean up double slashes
    newPath = newPath.replace(/\/+/g, '/');
    
    // Store preference and redirect
    localStorage.setItem('preferredLanguage', lang);
    window.location.href = newPath;
  }

  // Set correct language on page load
  document.addEventListener('DOMContentLoaded', function () {
    var select = document.getElementById('language-select');
    if (select) {
      var currentLang = select.value;
      if (currentLang) {
        localStorage.setItem('preferredLanguage', currentLang);
      }
    }
  });
</script>